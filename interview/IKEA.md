# 宜家前端开发面经

前段时间参加了 IKEA 的技术面。说来惭愧，这是我上班多年来第一次参加正式面试。以后想把自己的每一次面经都记录在博客里，为自己找到下一步行动的方向。

开始面经前，先介绍一下我打听到 IKEA 的组织架构——与真实情况可能有出入——大体分为这么几档：外包、Software Engineer、Senior、Engineering Manager（七八人的组长），Product Manager（技术大老板）。我投的是 Senior，原因很简单：传统大型企业都在转向电子商务平台，也许是个好机会。

## 电面

由于是内推，HR 也没筛我简历，直接让我电面了。电面半小时，流程很简单：自我介绍 + 一些高频面试题。我报的是 IKEA 的 Senior 前端开发，面试官主要问了 js 和 vue 的一些问题。难度不大，都是一两分钟的速达题。不过，我很少面试，所以很多细节没有意识到：比如，注意一下自己简历里的技术栈。怎么说呢，尽量契合自己准备的面经吧。我在自己几年前的项目里提到了 AngularJS，然后他就问到了 Angular 框架（虽然他们招的是 vue 开发）。后面 onsite 面也是，我简历里提到了项目后端用的一些技术栈，然后面试官就开问为什么用那些后端技术栈了。

下面两个问题我答得不好，也列出来作后续准备：

- HTML 离线存储

  当用户没有网络时，用户可以正常访问站点，当用户连接网络时，更新站点存储相关资源。html5 离线存储基于一个新建的 manifest 文件的缓存机制，根据这个文件的解析清单，缓存相关站点资源，这些资源就像 cookie 一样被存储下来，用户离线的时候加载离线数据。它有三个好处：离线浏览，提升页面载入速度，降低服务器压力

- VUE 相关

  VNode 实现、Diff 算法、双向绑定原理，这几个都问倒了。不过这类问题篇幅相对较大，电面又不能画图，回答时要条例清晰，最好事先准备一份精简版吧

电面算是过了，但是我被降档了；从 Senior 变成了普通的 Software Engineer 岗。其实也能理解，面试官大概率就是个 SE 岗，我连他的问题都不能完美通过，凭什么争 Senior 呢？问了一下 HR，SE 岗很难 Cover 我现在的工资，不过我还是想体验一下 onsite 面，所以就答应参加一个星期后的现场面。

## Onsite 一面

Onsite 面就是连续三场的 one on one 技术面；三个小时里，我几乎都没时间上厕所 😅。第一面面试官很帅气，脸上也洋溢着笑容。面试也比较常规吧，问了一下 JS 基础知识、Scrum 开发流程、项目管理，最后又做了一道算法题（归并排序）。我自己当面试官时基本也这样，所以聊得还是很融洽的。

一面总体来说难度不大，基本保持着对等交谈的姿态，即便是做算法题也是互相探讨。我用上了自己学生时代的面经套路 😅：先说一个简单，分析一通，发现缺陷，再进一步改进；这样时间可以过得更快一点，双方交流也体验更佳。到此为止我觉得自己表现还是可以的，但是。。。

## Onsite 二面

但是，二面面试官一进来空气就凝结了，没有自我介绍，也没有项目相关的探讨。打完招呼，第一句话就是“很多人用 Redis 是因为它流行；说一下你项目里为什么用到了 Redis？”。当时就慌了，Redis 是我某个项目列出的后端技术栈；讲真，我只准备了前端面经，让回答后端技术细节真的是猝不及防。我只好迂回解释了一通 Redis 做 Cache 的好处，可以在无状态服务之间做 Session 中心化保存，与项目里的 Graphql 结合可以解决 N+1 查询问题等等。可是面试官并不满意，一直强调很多人用 Redis 就是因为流行。我也解释了“流行”的好处：团队成员都有自我成长的需求，在成本和业务可接受的范围内，使用“流行”的技术也是为大家长远考量。然后，面试官又找到了我简历里的另一个工具——Storybook；还是一样的问题，为什么选择它，不选择其他竞品。就这样，前四十分钟基本都专注在各种技术选型上了。

后来，我突然意识到可能是因为简历写了我是 Tech lead 吧，所以他一直问技术选型的问题。大家懂了吧，你写在简历里的技术点，也是有一定风险的。当然，我也反问了他的 title——SE。

后面二十分钟，面试官话风一转，开始问 JS 相关问题了。第一问就是手写 bind 实现，这个我看过面经，马上用闭包和 call 写了个方法；但是立刻被否定了，表示不能用 call。当时我的脸刷一下就红了，这面经有变？（下面是后来找到的无 call 实现，大家体会一下）

```javascript
Function.prototype.bind(context, ...args) {
    var fToBind = this;
    var fNop = function() {};
    var fBound = function(...innerArgs) {
        // 将fToBind赋值给context一个属性上。
        context.__fn = fToBind;
        if(this instanceof fBound) {
            // 模拟new调用，创建一个新对象，新对象的原型链指向fBound的原型
            var instance = Object.create(fBound);
            instance.__fn = fToBind;
            var result = instance.__fn(...args, ...innerArgs);
            delete instance.__fn;
            // new调用时，如果构造函数返回了对象，使用返回的对象替换this
            if(result) return result;
            return instance;
        } else {
            // 在__fn没有显式绑定的情况下，__fn运行时this指向context
            var result = context.__fn(...args, ...innerArgs);
            // 调用完后将context的__fn属性删除
            delete context.__fn;
            return result;
      }
    }

    fNop.prototype = this.prototype;
    fBound.prototype = new fNop();
    return fBound;
}
```

挣扎了十分钟，我怕冷场就让换一题。面试官说：“好，那你手写实现一个 Promise 吧”。听完就翻翻白眼了 🙄，我之前看过掘金的答案，大家体会了一下：[《Promise实现》][1]

这种题目几分钟内保证实现不了的，聊了自己的想法（setTimeout 模拟异步，几个状态的判定等等），就草草结束了。最后一分钟，我还嘴贱，说自己更擅长算法；面试官“欣然”一笑，那下次让你做算法题。我又是背后一凉，他要是出hard题，换谁都是凉凉。回过头来再想这事，也许这个阶段面的是 Personality 吧？你耗到最后，他也许会在评价里给你写上“坚定而执着”吧。

二面表现很差，上文也略有牢骚。但是应对不同的面试官依旧能侃侃而谈，也是一种必备技能包。我自己面过一个小伙，很能调解气氛，即便不懂也会扯出很多其他方面的话题，虽然我最后还是挂了人家😅。Anyway，三面面试官已经敲门了。

## Onsite 三面

三面是 Manager 面，一般就是日后进组的组长了。然后 IKEA 的三面就是江湖上的 Behavior 面试：你有啥缺点，有啥优点，领导不鸟你怎么办，下属不鸟你怎么办，哪里成功了，哪里失败了等等。这种问题其他公司是 HR 问的，我事先特地向 HR 确认了当天全是技术面，但是谁又能保证技术面不能面 Behavior 呢？

我最怕这种问题了，所以我的回答也没啥参考价值，这里就不列了。这位 Manager 是个老江湖，谈笑风生，倒也不用担心二面那种冷场的问题。通常来说，未来领导一定会在面试时“压”你一下的，不然他日后的工作很难。如果你 communication 能力强，整场面试可以自己把控节奏；反过来，处理不当也可能变成一场 PUA。Behavior 面经大家可以查查，也有套路的；但是套路面是否能打动对面那个“未来领导”，自己权衡吧。比如，领导犯错，你是越级报告还是自己揽责，这都是有风险的事。我就听小伙伴说过，某面试官对他的反馈是“这人权责分得太清”，您品品。我自己当面试官也有一次很深刻的体会：对面是 PDD 的在职员工，虽然面试马马虎虎吧，但是他最后说了一句“我想找个能过周末的工作”，顿时就心软了。

再废话几句，Behavior 面试其实也是双向的面试，所以内心要清楚你是“求职”还是“应聘”？对面那位是要成为你领导的人，大家也得考虑自己的未来。

## 总结

面试的结果自然是失败喽——二面评价太差了。IKEA 这类小厂的面经网上比较难找，希望我的失败之旅能给有志之士一点启迪吧。最后，再提供一些小小的信息（当然并不是让你在面试的时候去“怼”面试官啦），大家最好心里有数。IKEA 的技术栈相对比较“传统”，绝大多数代码是外包完工的，可以认为是 made in India 啦。虽然他们很想招大厂 C 端经验的开发，但是自己的系统架构更接近 B 端，改造的路还很长很长。

[1]: https://juejin.im/post/6844903827359924231
